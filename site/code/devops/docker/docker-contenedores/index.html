<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Lanzar contenedores - Tips de Cristo</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Arrancar contenedores", url: "#_top", children: [
              {title: "Hello World", url: "#hello-world" },
              {title: "Puertos", url: "#puertos" },
              {title: "Lanzar contenedor con comando", url: "#lanzar-contenedor-con-comando" },
              {title: "Contenedores interactivos", url: "#contenedores-interactivos" },
              {title: "Asignarle un nombre al contenedor", url: "#asignarle-un-nombre-al-contenedor" },
              {title: "Salir del contenedor", url: "#salir-del-contenedor" },
              {title: "Limitar recursos", url: "#limitar-recursos" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../docker-imagenes/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../docker-imagenes/" class="btn btn-xs btn-link">
        Crear imágenes
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../docker-comandos/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../docker-comandos/" class="btn btn-xs btn-link">
        Comandos docker
      </a>
    </div>
    
  </div>

    

    <h1 id="arrancar-contenedores">Arrancar contenedores</h1>
<p>TODO</p>
<p>Ejemplo, limitar memoria a 500MB y solo usar hasta 2 cores</p>
<pre><code class="bash">docker run -m &quot;500mb&quot; --cpu-set-cpus 0-1 &lt;imagen&gt;
</code></pre>

<h3 id="hello-world">Hello World</h3>
<p>Para hacer un <strong><em>Hola mundo</em></strong> en Docker, lo que se hace es ejecutar un contenedor de la imagen <strong>hello-world</strong>. Para ello podemos bajar la imagen con <code>docker pull hello-world</code> y luego ejecutarlo. O bien ejecutarlo directamente y ya docker se encarga de bajar la imagen si n está y ejecutarla. Para ello hacemos</p>
<pre><code class="bash">docker run hello-world
</code></pre>

<h3 id="puertos">Puertos</h3>
<p>Por defecto todos los contenedores tienen todos los puertos cerrados. En muchos casos tienen ciertos puertos para poder consumir un servicio y el propio contenedor te dice que puertos y que tráfico soportan. La gracia aquí está en que nosotros podemos asignarle cualquier puerto del Host a ese puerto del contenedor con la opción <code>-p &lt;puerto-host&gt;:&lt;puerto-contenedor&gt;</code>. En el ejemplo ejecuto un docker con un jenkins, y le asígno el puerto 80 de mi máquina (que es el que usan los navegadores) al puerto 8080 del contenedor (que es por donde se despacha el jenkins).</p>
<pre><code class="bash">docker run -p 80:8080 jenkins
</code></pre>

<p>Esto es un buena solución en cuestiones de seguridad y de escalabilidad, ya que el contenedor tiene los puertos por defecto pero el host no.</p>
<h3 id="lanzar-contenedor-con-comando">Lanzar contenedor con comando</h3>
<p>Para ver por ejemplo el filesystem del contenedor ubuntu hacemos <code>docker run ubuntu ls</code>.  </p>
<h3 id="contenedores-interactivos">Contenedores interactivos</h3>
<p>Para que el contenedor ubuntu no se pare por ejemplo, podemos acceder con la opción <strong>interactive</strong> y con <strong>tty</strong></p>
<pre><code class="bash">docker run -i -t ubuntu bash
</code></pre>

<p>Ahora estamos dentro del container y podemos ejecutar comandos o lo que queramos.</p>
<h3 id="asignarle-un-nombre-al-contenedor">Asignarle un nombre al contenedor</h3>
<p>Para asignarle un nombre al contenedor para ser usado de manera más cómoda, hay que usar la opción <code>--name</code>. Este nombre se podrá usar en sustitución del <strong>id</strong> del contenedor en muchos comandos, haciendo así más fácil su uso.</p>
<pre><code class="bash">docker run --name perico -it ubuntu
</code></pre>

<p>Si queremos renombrar un contenedor debemos usar el comando <code>docker rename</code>.</p>
<pre><code class="bash">docker rename &lt;nombre-actual-del-contenedor&gt; &lt;nuevo-nombre-del-contenedor&gt;
</code></pre>

<h3 id="salir-del-contenedor">Salir del contenedor</h3>
<ul>
<li>Salir del contenedor y apagarlo / matarlo:</li>
<li>Para salir del contenedor podemos ejecutar el comando <code>exit</code></li>
<li>Usar la combinación <strong><em>Ctrl+D</em></strong>.</li>
<li>Salir del contenedor pero mantenerlo activo:</li>
<li>Mantener todo el rato la tecla <strong><em>Ctrl</em></strong></li>
<li>Luego pulsar <strong><em>P</em></strong></li>
<li>Después <strong><em>Q</em></strong></li>
<li>Es decir -&gt; <strong><em>Ctrl+P</em></strong>, <strong><em>D</em></strong></li>
</ul>
<h3 id="limitar-recursos">Limitar recursos</h3>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../docker-imagenes/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../docker-imagenes/" class="btn btn-xs btn-link">
        Crear imágenes
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../docker-comandos/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../docker-comandos/" class="btn btn-xs btn-link">
        Comandos docker
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>