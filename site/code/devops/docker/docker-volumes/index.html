<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Volumes - Tips de Cristo</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Docker Volumes", url: "#_top", children: [
              {title: "Manipular (crear, listar, destruir...) volumenes con docker volume", url: "#manipular-crear-listar-destruir-volumenes-con-docker-volume" },
              {title: "Montar volumen con docker run", url: "#montar-volumen-con-docker-run" },
              {title: "Montar volumen con Dockerfile", url: "#montar-volumen-con-dockerfile" },
              {title: "Dangling Volumes", url: "#dangling-volumes" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../docker-network/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../docker-network/" class="btn btn-xs btn-link">
        Network
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../docker-dockerfile/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../docker-dockerfile/" class="btn btn-xs btn-link">
        Dockerfile
      </a>
    </div>
    
  </div>

    

    <h1 id="docker-volumes">Docker Volumes</h1>
<p>Información oficial -&gt; <a href="https://docs.docker.com/storage/volumes/">aquí</a></p>
<p>Existen 3 tipos de volumenes:</p>
<ul>
<li>Host Volumes -&gt; Una carpeta del Host.</li>
<li>Named Volumes -&gt; Un volumen con nombre creado con Docker<ul>
<li>No deja de ser un Host Volume pero en la carpeta <code>/../docker/volumes/&lt;nombre-volumen&gt;</code></li>
</ul>
</li>
<li>Anonymous Volumes -&gt; Es igual que Named Volumes solo que el nombre es un hash que asigna docker.</li>
</ul>
<h2 id="manipular-crear-listar-destruir-volumenes-con-docker-volume">Manipular (crear, listar, destruir...) volumenes con <code>docker volume</code></h2>
<pre><code class="bash"># Crear volumen
docker volume create &lt;nombre-volumen&gt;
# Listar volumenes
docker volume ls
# Borrar volumen
docker volume rm &lt;nombre-volumen&gt;
</code></pre>

<p>Se recomienda asignar nombre a los volúmenes, ya que sino serán volúmenes anónimos y es más complicado nombrarlos (hay que usar su id).</p>
<h2 id="montar-volumen-con-docker-run">Montar volumen con <code>docker run</code></h2>
<pre><code class="bash"># Ejecutar contenedor con un volumen host montado en el contenedor
docker run -v [&lt;directorio-host-o-volumen-definido&gt;:]&lt;directorio-contenedor&gt; -t &lt;nombre-contenedor&gt;
# Borrar tanto el contendor como su volumen
docker rm -v &lt;nombre-contenedor&gt;
</code></pre>

<p><strong>OJO</strong> -&gt; Si queremos montar una carpeta local específica en un contenedor, solo podemos hacerlo con este comando. No se puede montar una carpeta local específica desde el Dockerfile ya que el path podría cambiar. Por ejemplo si queremos montar la propia carpeta en la que estamos haríamos</p>
<pre><code class="bash">docker run -v $(pwd):&lt;directorio-contenedor&gt; &lt;contenedor&gt;
</code></pre>

<p>Si no indica el <code>&lt;directorio-host-o-volumen-definido&gt;</code>, se creará un volumen anónimo.  </p>
<h2 id="montar-volumen-con-dockerfile">Montar volumen con <code>Dockerfile</code></h2>
<p>Desde el Dockerfile podemos hacer lo mismo, pero solo crea volumenes anónimos. Es decir, que no podemos montar una carpeta local específica.</p>
<pre><code class="bash">VOLUME &lt;directorio-contenedor&gt;
</code></pre>

<h2 id="dangling-volumes">Dangling Volumes</h2>
<p>Si al borrar los contenedores, no especificamos que borre sus volumenes con <code>-v</code>, quedarán los llamados <strong><em>Dangling Volumes</em></strong>. Para verlos y borrarlos</p>
<pre><code class="bash"># Ver todos los volumenes dangling
docker volume ls -f dangling=true
# Listar todos los ids de los dangling volumes | Borrarlos
docker volume ls -f dangling=true -q | xargs docker volume rm
</code></pre>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../docker-network/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../docker-network/" class="btn btn-xs btn-link">
        Network
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../docker-dockerfile/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../docker-dockerfile/" class="btn btn-xs btn-link">
        Dockerfile
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>